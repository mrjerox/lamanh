<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
</head>

<body>
    <section class="section box-home-activity">
        <div class="container">
            <div class="activity-main">
                <div class="left">
                    <div class="box-head text-white">
                        <img src="images/logo.svg" alt="Hoàng Mỹ Lam Anh" class="text-logo">
                        <p>Xin chào, tôi là Hoàng Mỹ Lam Anh! <br> Tổng giám đốc của tập đoàn Thiên Ý Group. Một doanh
                            nghiệp hoạt động trong lĩnh vực chăm sóc sức khỏe & làm đẹp.</p>
                    </div>
                </div>
                <div class="right">
                    <div class="box-head --normal text-white">
                        <h2 class="title">Tin nổi bật</h2>
                    </div>
                    <div class="slide-outer">
                        <div class="activity-slide swiper">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <div class="activity-item">
                                        <span class="activity-close">
                                            <img src="images/double-arrow.svg" alt="Double arrow left">
                                        </span>
                                        <div class="activity-img">
                                            <img src="images/la1.jpg" alt="lewlew">
                                            <div class="content">
                                                <h3 class="activity-title">Hầu đồng</h3>
                                                <p>Những vấn hầu đặc biệt <br> của văn hóa Tứ Phủ Việt Nam...</p>
                                            </div>
                                        </div>
                                        <div class="box-button">
                                            <a href="#" class="btn-main --readmore">Xem tại đây</a>
                                            <a href="https://www.tiktok.com/" class="btn-main --tiktok" target="_blank">Khám phá kênh tiktok</a>
                                        </div>
                                    </div>
                                    <div class="activity-body">
                                        <img src="images/logo2.svg" class="text-logo --v2" alt="Hoàng Mỹ Lam Anh">
                                        <div class="body-content">
                                            <h4 class="body-title">TIỆC THOẢI BỒNG LAI</h4>
                                            <div class="desc">
                                                <p>Được diễn ra vào ngày 18 tháng 6 (Âm Lịch). <br> Tại đền Bồng Lai,
                                                    Hòa Bình. <br> Vấn Hầu này hết sức đặc biệt. Vì đây là vấn hầu chung
                                                    giữa mình và Phạm Thu Hường (Mật Hạnh).</p>
                                            </div>
                                        </div>
                                        <div class="body-img">
                                            <a href="images/la2.jpg" data-fancybox="gallery">
                                                <img src="images/la2.jpg" alt="">
                                            </a>
                                            <a href="images/la3.jpg" data-fancybox="gallery">
                                                <img src="images/la3.jpg" alt="">
                                            </a>
                                            <a href="images/la2.jpg" data-fancybox="gallery">
                                                <img src="images/la2.jpg" alt="">
                                            </a>
                                            <a href="images/la3.jpg" data-fancybox="gallery">
                                                <img src="images/la3.jpg" alt="">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="swiper-slide">
                                    <div class="activity-item">
                                        <span class="activity-close">
                                            <img src="images/double-arrow.svg" alt="Double arrow left">
                                        </span>
                                        <div class="activity-img">
                                            <img src="images/la2-1.jpg" alt="lewlew">
                                            <div class="content">
                                                <h3 class="activity-title">Cảm hứng</h3>
                                                <p>Dù là đàn ông hay phụ nữ <br> họ cũng đều cần một sự nghiệp...</p>
                                            </div>
                                        </div>
                                        <div class="box-button">
                                            <a href="#" class="btn-main --readmore">Xem tại đây</a>
                                            <a href="https://www.tiktok.com/" class="btn-main --tiktok" target="_blank">Tìm hiểu thêm</a>
                                        </div>
                                    </div>
                                    <div class="activity-body">
                                        <img src="images/logo2.svg" class="text-logo --v2" alt="Hoàng Mỹ Lam Anh">
                                        <div class="body-content">
                                            <h4 class="body-title">"Phụ nữ hay đàn ông đều cần một sự nghiệp"</h4>
                                            <div class="desc">
                                                <p>
                                                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Vitae delectus, nam tempora sed nostrum quae mollitia repellat eos vero explicabo atque veniam error commodi fuga culpa voluptas alias minima temporibus?
                                                </p>
                                                <p>
                                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos et consequuntur aliquam dicta corporis expedita saepe nulla impedit, soluta libero est sed, vitae voluptatibus, aspernatur quasi! Dicta cupiditate exercitationem magni.
                                                </p>
                                            </div>
                                        </div>
                                        <div class="body-img"></div>
                                    </div>
                                </div>
                                <div class="swiper-slide">
                                    <div class="activity-item">
                                        <span class="activity-close">
                                            <img src="images/double-arrow.svg" alt="Double arrow left">
                                        </span>
                                        <div class="activity-img">
                                            <img src="images/la3-1.jpg" alt="lewlew">
                                            <div class="content">
                                                <h3 class="activity-title">Nội tiết tố</h3>
                                                <p>Đừng để lão hóa là kẻ thù<br> phá vỡ hạnh phúc vợ chồng bạn...</p>
                                            </div>
                                        </div>
                                        <div class="box-button">
                                            <a href="#" class="btn-main --readmore">Xem tại đây</a>
                                            <a href="https://www.tiktok.com/" class="btn-main --tiktok" target="_blank">Tìm hiểu thêm</a>
                                        </div>
                                    </div>
                                    <div class="activity-body">
                                        <img src="images/logo2.svg" class="text-logo --v2" alt="Hoàng Mỹ Lam Anh">
                                        <div class="body-content">
                                            <h4 class="body-title">Đừng để lão hóa <br> <strong>phá vỡ hạnh phúc vợ chồng</strong></h4>
                                            <div class="desc">
                                                <p>Một năm không biết có bao nhiêu cặp vợ chồng phải chia tay “chỉ vì lý do ngoại tình”. Liệu rằng các bạn cũng đang như vậy?</p>
                                                <ul>
                                                    <li>Bạn có biết “sự lão hóa của phụ nữ” cũng là tác nhân dẫn tới việc <span>“chồng bạn đi ngoại tình”</span> hay không?</li>
                                                    <li>Bạn bất lực không biết cách để cứu vãn?</li>
                                                    <li>Bạn nghĩ rằng những sự sụp đổ đó sẽ không tìm tới mình sao?</li>
                                                </ul>
                                                <p>Nếu bạn gặp bất kể tình trạng nào liên quan tới: Nám, lão hóa da, khô hạn, hay bốc hỏa, kinh nguyệt không đều...</p>
                                            </div>
                                        </div>
                                        <div class="body-img"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

    <script>
        window.addEventListener('load', () => {
            // Swiper
            let activitySlide = new Swiper(".activity-slide", {
                slidesPerView: 1.4,
                // loop: true,
                // centeredSlides: true,
                spaceBetween: 34,
                pagination: {
                    el: ".activity-slide .swiper-pagination",
                    clickable: true,
                },
                allowTouchMove: true,
            });

            // Function
            const position = (el) => {
                const { top, left } = el.getBoundingClientRect();
                const { marginTop, marginLeft } = getComputedStyle(el);
                return {
                    top: top - parseInt(marginTop, 10),
                    left: left - parseInt(marginLeft, 10)
                };
            }

            const reInitSwiper = (variable, slide, rollback = false) => {
                variable.params.slidesPerView = slide
                variable.allowTouchMove = rollback
                if (deviceWidth <= 576 && !rollback) {
                    document.querySelectorAll('.box-home-activity .activity-item .activity-img img').forEach(item => item.style.height = `${deviceHeight / 100 * 40}px`)
                    document.querySelectorAll('.box-home-activity .activity-body .body-img img').forEach(item => item.style.height = `${deviceHeight / 100 * 30}px`)
                } else {
                    document.querySelectorAll('.box-home-activity .activity-item .activity-img img').forEach(item => item.style.height = `auto`)
                    document.querySelectorAll('.box-home-activity .activity-body .body-img img').forEach(item => item.style.height = `auto`)
                }
                variable.update()
            }

            const pauseTween = (variable) => {
                variable.pause();
                console.log(variable);
            }

            let deviceHeight = window.innerHeight
            let deviceWidth = window.innerWidth
            let slide = document.querySelector('.activity-slide')

            document.querySelectorAll('.activity-slide .activity-body').forEach(item => item.style.cssText = `height: ${deviceHeight + 20 - deviceHeight / 100 * 40}px; bottom: -${deviceHeight - position(slide).top}px;`)
            
            // Gsap
            let btnActivity = document.querySelectorAll('.activity-item .box-button .btn-main.--readmore');

            btnActivity.forEach((item) => {
                item.addEventListener('click', (e) => {
                    e.preventDefault()
                    reInitSwiper(activitySlide, 1)

                    let target = e.currentTarget
                    let boxButton = target.parentNode
                    let closeButton = document.querySelectorAll('.activity-close')
                    let slideOuter = document.querySelector('.box-home-activity .slide-outer')
                    let slidePagination = document.querySelector('.activity-slide .swiper-pagination')
                    let slideContent = boxButton.parentNode.querySelector('.activity-img .content')
                    let slideBody = boxButton.parentNode.parentNode.querySelector('.activity-body')
                    let currentCloseButton = boxButton.parentNode.querySelector('.activity-close')
                    let tweenActivitySlide = gsap.fromTo(
                        slide,
                        {
                            opacity: 0,
                            scale: .7,
                        },
                        {
                            scale: 1,
                            opacity: 1,
                            top: -position(slide).top,
                            duration: 1,
                        }
                    )
                    let tweenContent = gsap.fromTo(
                        slideContent,
                        {
                            opacity: 0,
                        },
                        {
                            opacity: 1,
                            duration: 2,
                            delay: 1,
                            borderRadius: 0,
                        },
                    )
                    let tweenButton = gsap.fromTo(
                        boxButton,
                        {
                            opacity: 0,
                            right: "50%",
                            x: "50%",
                        },
                        {
                            opacity: 1,
                            top: `${deviceHeight - 90}px`,
                            duration: 3,
                        }
                    )
                    let tweenBody = gsap.to(
                        slideBody,
                        {
                            opacity: 1,
                            bottom: 0,
                            visibility: 'visible',
                            duration: 1,
                        }
                    )

                    document.querySelector('body').style.overflow = "hidden"
                    slide.style.height = `${deviceHeight}px`;
                    slidePagination.style.display = "none";
                    slideOuter.style.paddingLeft = 0
                    boxButton.parentNode.classList.toggle('active')
                    boxButton.querySelector('.btn-main.--tiktok').classList.toggle('active')
                    slideBody.classList.toggle('active')
                    currentCloseButton.classList.toggle('active')

                    // Revert
                    closeButton.forEach((item) => {
                        item.addEventListener('click', (e) => {
                            e.preventDefault()
                            tweenActivitySlide.reverse()
                            tweenContent.reverse()
                            tweenButton.reverse()
                            tweenBody.reverse()

                            slideBody.classList.remove('active')
                            document.querySelector('body').style.overflow = "auto"
                            boxButton.parentNode.classList.remove('active')
                            boxButton.querySelector('.btn-main.--tiktok').classList.remove('active')
                            currentCloseButton.classList.remove('active')
                            slidePagination.style.display = 'block'

                            setTimeout(() => {
                                tweenContent.revert()
                                tweenButton.revert()
                                tweenBody.revert()
                                tweenActivitySlide.revert()
                                reInitSwiper(activitySlide, 1.4, true)
                                slide.style.height = 'auto'
                                slideOuter.style.paddingLeft = '16px'
                            }, 800)
                        })
                    })
                })
            })
            })

            // Init fancybox
            Fancybox.bind("[data-fancybox]", {
                // Your custom options
            });
    </script>
</body>

</html>